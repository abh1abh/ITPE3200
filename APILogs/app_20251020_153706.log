2025-10-20 15:37:07.153 +02:00 [INF] User profile is available. Using '/Users/alexanderhoyskel/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-10-20 15:37:07.211 +02:00 [INF] Now listening on: http://localhost:5217
2025-10-20 15:37:07.217 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-20 15:37:07.220 +02:00 [INF] Hosting environment: Development
2025-10-20 15:37:07.221 +02:00 [INF] Content root path: /Users/alexanderhoyskel/VSCode/ITPE3200/api
2025-10-20 15:37:07.273 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/swagger/index.html - null null
2025-10-20 15:37:07.316 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/swagger/index.html - 200 null text/html;charset=utf-8 43.6851ms
2025-10-20 15:37:07.380 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/swagger/index.html - null null
2025-10-20 15:37:07.382 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/swagger/index.html - 200 null text/html;charset=utf-8 2.3202ms
2025-10-20 15:37:07.488 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/swagger/v1/swagger.json - null null
2025-10-20 15:37:07.583 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.5333ms
2025-10-20 15:37:07.609 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/swagger/v1/swagger.json - null null
2025-10-20 15:37:07.611 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1.9475ms
2025-10-20 15:37:57.406 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5217/api/ItemAPI/delete/1 - null null
2025-10-20 15:37:57.448 +02:00 [INF] CORS policy execution failed.
2025-10-20 15:37:57.449 +02:00 [INF] Request origin http://localhost:5217 does not have permission to access the resource.
2025-10-20 15:37:57.516 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-20 15:37:57.517 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-20 15:37:57.518 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5217/api/ItemAPI/delete/1 - 401 0 null 112.2021ms
2025-10-20 15:38:57.222 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5217/api/Auth/register - application/json-patch+json 81
2025-10-20 15:38:57.257 +02:00 [INF] CORS policy execution failed.
2025-10-20 15:38:57.258 +02:00 [INF] Request origin http://localhost:5217 does not have permission to access the resource.
2025-10-20 15:38:57.271 +02:00 [INF] Executing endpoint 'MyShop.Controllers.AuthController.Register (api)'
2025-10-20 15:38:57.301 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyShop.DTO.RegisterDto) on controller MyShop.Controllers.AuthController (api).
2025-10-20 15:38:57.392 +02:00 [WRN] [AuthAPIController] user registration failed for admin: ["Microsoft.AspNetCore.Identity.IdentityError","Microsoft.AspNetCore.Identity.IdentityError"]
2025-10-20 15:38:57.395 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-10-20 15:38:57.409 +02:00 [INF] Executed action MyShop.Controllers.AuthController.Register (api) in 106.2823ms
2025-10-20 15:38:57.409 +02:00 [INF] Executed endpoint 'MyShop.Controllers.AuthController.Register (api)'
2025-10-20 15:38:57.411 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5217/api/Auth/register - 400 224 application/json; charset=utf-8 189.3264ms
2025-10-20 15:39:12.191 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5217/api/Auth/register - application/json-patch+json 81
2025-10-20 15:39:12.196 +02:00 [INF] CORS policy execution failed.
2025-10-20 15:39:12.196 +02:00 [INF] Request origin http://localhost:5217 does not have permission to access the resource.
2025-10-20 15:39:12.199 +02:00 [INF] Executing endpoint 'MyShop.Controllers.AuthController.Register (api)'
2025-10-20 15:39:12.201 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyShop.DTO.RegisterDto) on controller MyShop.Controllers.AuthController (api).
2025-10-20 15:39:12.210 +02:00 [WRN] [AuthAPIController] user registration failed for admin: ["Microsoft.AspNetCore.Identity.IdentityError"]
2025-10-20 15:39:12.211 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityError, Microsoft.Extensions.Identity.Core, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-10-20 15:39:12.212 +02:00 [INF] Executed action MyShop.Controllers.AuthController.Register (api) in 11.0421ms
2025-10-20 15:39:12.212 +02:00 [INF] Executed endpoint 'MyShop.Controllers.AuthController.Register (api)'
2025-10-20 15:39:12.212 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5217/api/Auth/register - 400 121 application/json; charset=utf-8 21.3978ms
2025-10-20 15:39:21.926 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5217/api/Auth/register - application/json-patch+json 82
2025-10-20 15:39:21.926 +02:00 [INF] CORS policy execution failed.
2025-10-20 15:39:21.926 +02:00 [INF] Request origin http://localhost:5217 does not have permission to access the resource.
2025-10-20 15:39:21.926 +02:00 [INF] Executing endpoint 'MyShop.Controllers.AuthController.Register (api)'
2025-10-20 15:39:21.927 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(MyShop.DTO.RegisterDto) on controller MyShop.Controllers.AuthController (api).
2025-10-20 15:39:22.091 +02:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2025-10-20 15:39:22.117 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MyShop.DAL.AuthDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-10-20 15:39:22.184 +02:00 [INF] Executed action MyShop.Controllers.AuthController.Register (api) in 257.0805ms
2025-10-20 15:39:22.184 +02:00 [INF] Executed endpoint 'MyShop.Controllers.AuthController.Register (api)'
2025-10-20 15:39:22.206 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: AspNetUsers'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateUserName(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserValidator`1.ValidateAsync(UserManager`1 manager, TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.ValidateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user, String password)
   at MyShop.Controllers.AuthController.Register(RegisterDto registerDto) in /Users/alexanderhoyskel/VSCode/ITPE3200/api/Controllers/AuthController.cs:line 42
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c__DisplayClass0_0.<<<Main>$>b__8>d.MoveNext() in /Users/alexanderhoyskel/VSCode/ITPE3200/api/Program.cs:line 135
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-10-20 15:39:22.213 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5217/api/Auth/register - 500 null text/plain; charset=utf-8 287.4737ms
2025-10-20 15:39:46.492 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/api/itemapi/itemlist - null null
2025-10-20 15:39:46.496 +02:00 [INF] CORS policy execution successful.
2025-10-20 15:39:46.498 +02:00 [INF] Executing endpoint 'MyShop.Controllers.ItemAPIController.ItemList (api)'
2025-10-20 15:39:46.523 +02:00 [INF] Route matched with {action = "ItemList", controller = "ItemAPI"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ItemList() on controller MyShop.Controllers.ItemAPIController (api).
2025-10-20 15:39:46.636 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MyShop.Models.Item, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-20 15:39:46.644 +02:00 [INF] Executed action MyShop.Controllers.ItemAPIController.ItemList (api) in 120.4579ms
2025-10-20 15:39:46.644 +02:00 [INF] Executed endpoint 'MyShop.Controllers.ItemAPIController.ItemList (api)'
2025-10-20 15:39:46.649 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/api/itemapi/itemlist - null null
2025-10-20 15:39:46.649 +02:00 [INF] CORS policy execution successful.
2025-10-20 15:39:46.649 +02:00 [INF] Executing endpoint 'MyShop.Controllers.ItemAPIController.ItemList (api)'
2025-10-20 15:39:46.649 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/api/itemapi/itemlist - 200 1544 application/json; charset=utf-8 158.6858ms
2025-10-20 15:39:46.649 +02:00 [INF] Route matched with {action = "ItemList", controller = "ItemAPI"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ItemList() on controller MyShop.Controllers.ItemAPIController (api).
2025-10-20 15:39:46.662 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/chickenleg.jpg - null null
2025-10-20 15:39:46.663 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/pizza.jpg - null null
2025-10-20 15:39:46.663 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/frenchfries.jpg - null null
2025-10-20 15:39:46.688 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/tacos.jpg - null null
2025-10-20 15:39:46.692 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/ribs.jpg - null null
2025-10-20 15:39:46.704 +02:00 [INF] The file /images/pizza.jpg was not modified
2025-10-20 15:39:46.704 +02:00 [INF] The file /images/chickenleg.jpg was not modified
2025-10-20 15:39:46.704 +02:00 [INF] The file /images/ribs.jpg was not modified
2025-10-20 15:39:46.704 +02:00 [INF] The file /images/tacos.jpg was not modified
2025-10-20 15:39:46.704 +02:00 [INF] The file /images/frenchfries.jpg was not modified
2025-10-20 15:39:46.705 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/chickenleg.jpg - 304 null image/jpeg 42.5073ms
2025-10-20 15:39:46.705 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/ribs.jpg - 304 null image/jpeg 13.3887ms
2025-10-20 15:39:46.705 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/pizza.jpg - 304 null image/jpeg 41.9245ms
2025-10-20 15:39:46.705 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/tacos.jpg - 304 null image/jpeg 17.9199ms
2025-10-20 15:39:46.705 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/frenchfries.jpg - 304 null image/jpeg 41.84ms
2025-10-20 15:39:46.803 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/fishandchips.jpg - null null
2025-10-20 15:39:46.804 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/cider.jpg - null null
2025-10-20 15:39:46.804 +02:00 [INF] The file /images/cider.jpg was not modified
2025-10-20 15:39:46.804 +02:00 [INF] The file /images/fishandchips.jpg was not modified
2025-10-20 15:39:46.804 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/cider.jpg - 304 null image/jpeg 0.5016ms
2025-10-20 15:39:46.804 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/fishandchips.jpg - 304 null image/jpeg 0.7018ms
2025-10-20 15:39:46.816 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5217/images/coke.jpg - null null
2025-10-20 15:39:46.818 +02:00 [INF] The file /images/coke.jpg was not modified
2025-10-20 15:39:46.819 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/images/coke.jpg - 304 null image/jpeg 2.9189ms
2025-10-20 15:39:46.836 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MyShop.Models.Item, api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-20 15:39:46.836 +02:00 [INF] Executed action MyShop.Controllers.ItemAPIController.ItemList (api) in 186.8832ms
2025-10-20 15:39:46.836 +02:00 [INF] Executed endpoint 'MyShop.Controllers.ItemAPIController.ItemList (api)'
2025-10-20 15:39:46.837 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5217/api/itemapi/itemlist - 200 1544 application/json; charset=utf-8 187.7495ms
